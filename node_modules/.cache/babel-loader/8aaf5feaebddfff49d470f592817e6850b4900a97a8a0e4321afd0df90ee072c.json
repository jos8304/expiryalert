{"ast":null,"code":"import{useState}from'react';import useTranslate from'../hooks/useTranslate';import FoodForm from'./FoodForm';import placeholderImg from'../assets/preview-placeholder.png';import'./FoodList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function formatDate(value){const date=new Date(value);return`${date.getFullYear()}. ${date.getMonth()+1}. ${date.getDate()}`;}function FoodListItem(_ref){let{item,onEdit,onDelete}=_ref;const{imgUrl,title,calorie,content,createdAt}=item;const t=useTranslate();const handleEditClick=()=>{onEdit(item.id);};const handleDeleteClick=()=>{onDelete(item.id);};return/*#__PURE__*/_jsxs(\"div\",{className:\"FoodListItem\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"FoodListItem-preview\",src:imgUrl||placeholderImg,alt:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"FoodListItem-rows\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"FoodListItem-title-calorie\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"FoodListItem-title\",children:title}),/*#__PURE__*/_jsxs(\"span\",{className:\"FoodListItem-calorie\",children:[calorie,\"kcal\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"FoodListItem-content\",children:content}),/*#__PURE__*/_jsxs(\"div\",{className:\"FoodListItem-date-buttons\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"FoodListItem-date\",children:formatDate(createdAt)}),/*#__PURE__*/_jsxs(\"div\",{className:\"FoodListItem-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"FoodListItem-edit-button\",onClick:handleEditClick,children:t('edit button')}),/*#__PURE__*/_jsx(\"button\",{className:\"FoodListItem-delete-button\",onClick:handleDeleteClick,children:t('delete button')})]})]})]})]});}function FoodList(_ref2){let{className='',items,onUpdate,onUpdateSuccess,onDelete}=_ref2;const[editingId,setEditingId]=useState(null);const handleCancel=()=>{setEditingId(null);};return/*#__PURE__*/_jsx(\"ul\",{className:`FoodList ${className}`,children:items.map(item=>{if(item.id===editingId){const{id,imgUrl,title,calorie,content}=item;const initialValues={title,calorie,content,imgFile:null};const handleSubmit=formData=>onUpdate(id,formData);const handleSubmitSuccess=newItem=>{onUpdateSuccess(newItem);setEditingId(null);};return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(FoodForm,{initialValues:initialValues,initialPreview:imgUrl,onSubmit:handleSubmit,onSubmitSuccess:handleSubmitSuccess,onCancel:handleCancel})},item.id);}return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(FoodListItem,{item:item,onEdit:setEditingId,onDelete:onDelete})},item.id);})});}export default FoodList;","map":{"version":3,"names":["useState","useTranslate","FoodForm","placeholderImg","jsx","_jsx","jsxs","_jsxs","formatDate","value","date","Date","getFullYear","getMonth","getDate","FoodListItem","_ref","item","onEdit","onDelete","imgUrl","title","calorie","content","createdAt","t","handleEditClick","id","handleDeleteClick","className","children","src","alt","onClick","FoodList","_ref2","items","onUpdate","onUpdateSuccess","editingId","setEditingId","handleCancel","map","initialValues","imgFile","handleSubmit","formData","handleSubmitSuccess","newItem","initialPreview","onSubmit","onSubmitSuccess","onCancel"],"sources":["C:/Users/jos83/project/expiryalert/src/components/FoodList.js"],"sourcesContent":["import { useState } from 'react';\nimport useTranslate from '../hooks/useTranslate';\nimport FoodForm from './FoodForm';\nimport placeholderImg from '../assets/preview-placeholder.png';\nimport './FoodList.css';\n\nfunction formatDate(value) {\n  const date = new Date(value);\n  return `${date.getFullYear()}. ${date.getMonth() + 1}. ${date.getDate()}`;\n}\n\nfunction FoodListItem({ item, onEdit, onDelete }) {\n  const { imgUrl, title, calorie, content, createdAt } = item;\n  const t = useTranslate();\n\n  const handleEditClick = () => {\n    onEdit(item.id);\n  };\n\n  const handleDeleteClick = () => {\n    onDelete(item.id);\n  };\n\n  return (\n    <div className=\"FoodListItem\">\n      <img\n        className=\"FoodListItem-preview\"\n        src={imgUrl || placeholderImg}\n        alt={title}\n      />\n      <div className=\"FoodListItem-rows\">\n        <div className=\"FoodListItem-title-calorie\">\n          <h1 className=\"FoodListItem-title\">{title}</h1>\n          <span className=\"FoodListItem-calorie\">{calorie}kcal</span>\n        </div>\n        <p className=\"FoodListItem-content\">{content}</p>\n        <div className=\"FoodListItem-date-buttons\">\n          <p className=\"FoodListItem-date\">{formatDate(createdAt)}</p>\n          <div className=\"FoodListItem-buttons\">\n            <button\n              className=\"FoodListItem-edit-button\"\n              onClick={handleEditClick}\n            >\n              {t('edit button')}\n            </button>\n            <button\n              className=\"FoodListItem-delete-button\"\n              onClick={handleDeleteClick}\n            >\n              {t('delete button')}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FoodList({\n  className = '',\n  items,\n  onUpdate,\n  onUpdateSuccess,\n  onDelete,\n}) {\n  const [editingId, setEditingId] = useState(null);\n\n  const handleCancel = () => {\n    setEditingId(null);\n  };\n\n  return (\n    <ul className={`FoodList ${className}`}>\n      {items.map((item) => {\n        if (item.id === editingId) {\n          const { id, imgUrl, title, calorie, content } = item;\n          const initialValues = { title, calorie, content, imgFile: null };\n\n          const handleSubmit = (formData) => onUpdate(id, formData);\n\n          const handleSubmitSuccess = (newItem) => {\n            onUpdateSuccess(newItem);\n            setEditingId(null);\n          };\n\n          return (\n            <li key={item.id}>\n              <FoodForm\n                initialValues={initialValues}\n                initialPreview={imgUrl}\n                onSubmit={handleSubmit}\n                onSubmitSuccess={handleSubmitSuccess}\n                onCancel={handleCancel}\n              />\n            </li>\n          );\n        }\n        return (\n          <li key={item.id}>\n            <FoodListItem\n              item={item}\n              onEdit={setEditingId}\n              onDelete={onDelete}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n}\n\nexport default FoodList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}