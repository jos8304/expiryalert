{"ast":null,"code":"import{useEffect,useState}from'react';import{createFood,updateFood,getFoods,deleteFood}from'../api';import FoodList from'./FoodList';import FoodForm from'./FoodForm';import LocaleSelect from'./LocaleSelect';import useTranslate from'../hooks/useTranslate';import logoImg from'../assets/logo.png';import searchImg from'../assets/ic-search.png';import logoTextImg from'../assets/logo-text.png';import backgroundImg from'../assets/background.png';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppSortButton(_ref){let{selected,children,onClick}=_ref;return/*#__PURE__*/_jsx(\"button\",{disabled:selected,className:`AppSortButton ${selected?'selected':''}`,onClick:onClick,children:children});}function App(){const t=useTranslate();const[order,setOrder]=useState('createdAt');const[cursor,setCursor]=useState(null);const[items,setItems]=useState([]);const[isLoading,setIsLoading]=useState(false);const[loadingError,setLoadingError]=useState(null);const[search,setSearch]=useState('');const handleNewestClick=()=>setOrder('createdAt');const handleCalorieClick=()=>setOrder('calorie');const handleDelete=async id=>{const result=await deleteFood(id);if(!result)return;const nextItems=items.filter(item=>item.id!==id);setItems(nextItems);};const handleLoad=async options=>{let result;try{setLoadingError(null);setIsLoading(true);result=await getFoods(options);}catch(error){setLoadingError(error);return;}finally{setIsLoading(false);}const{foods,paging:{nextCursor}}=result;if(!options.cursor){setItems(foods);}else{setItems(prevItems=>[...prevItems,...foods]);}setCursor(nextCursor);};const handleLoadMore=()=>{handleLoad({order,cursor,search});};const handleSearchSubmit=e=>{e.preventDefault();setSearch(e.target['search'].value);};const handleCreateSuccess=newItem=>{setItems(prevItems=>[newItem,...prevItems]);};const handleUpdateSuccess=newItem=>{setItems(prevItems=>{const splitIdx=prevItems.findIndex(item=>item.id===newItem.id);return[...prevItems.slice(0,splitIdx),newItem,...prevItems.slice(splitIdx+1)];});};const sortedItems=items.sort((a,b)=>b[order]-a[order]);useEffect(()=>{handleLoad({order,search});},[order,search]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",style:{backgroundImage:`url(\"${backgroundImg}\")`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"App-nav\",children:/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Foodit\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"App-FoodForm\",children:/*#__PURE__*/_jsx(FoodForm,{onSubmit:createFood,onSubmitSuccess:handleCreateSuccess})}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-filter\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"App-search\",onSubmit:handleSearchSubmit,children:[/*#__PURE__*/_jsx(\"input\",{className:\"App-search-input\",name:\"search\"}),/*#__PURE__*/_jsx(\"button\",{className:\"App-search-button\",type:\"submit\",children:/*#__PURE__*/_jsx(\"img\",{src:searchImg,alt:\"\\uAC80\\uC0C9\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-orders\",children:[/*#__PURE__*/_jsx(AppSortButton,{selected:order==='createdAt',onClick:handleNewestClick,children:t('newest')}),/*#__PURE__*/_jsx(AppSortButton,{selected:order==='calorie',onClick:handleCalorieClick,children:t('sort by calorie')})]})]}),/*#__PURE__*/_jsx(FoodList,{className:\"App-FoodList\",items:sortedItems,onUpdate:updateFood,onUpdateSuccess:handleUpdateSuccess,onDelete:handleDelete}),cursor&&/*#__PURE__*/_jsx(\"button\",{className:\"App-load-more-button\",disabled:isLoading,onClick:handleLoadMore,children:t('load more')}),loadingError&&/*#__PURE__*/_jsx(\"p\",{children:loadingError.message})]}),/*#__PURE__*/_jsx(\"div\",{className:\"App-footer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"App-footer-container\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoTextImg,alt:\"Foodit\"}),/*#__PURE__*/_jsx(LocaleSelect,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"App-footer-menu\",children:[t('terms of service'),\" | \",t('privacy policy')]})]})})]});}export default App;","map":{"version":3,"names":["useEffect","useState","createFood","updateFood","getFoods","deleteFood","FoodList","FoodForm","LocaleSelect","useTranslate","logoImg","searchImg","logoTextImg","backgroundImg","jsx","_jsx","jsxs","_jsxs","AppSortButton","_ref","selected","children","onClick","disabled","className","App","t","order","setOrder","cursor","setCursor","items","setItems","isLoading","setIsLoading","loadingError","setLoadingError","search","setSearch","handleNewestClick","handleCalorieClick","handleDelete","id","result","nextItems","filter","item","handleLoad","options","error","foods","paging","nextCursor","prevItems","handleLoadMore","handleSearchSubmit","e","preventDefault","target","value","handleCreateSuccess","newItem","handleUpdateSuccess","splitIdx","findIndex","slice","sortedItems","sort","a","b","style","backgroundImage","src","alt","onSubmit","onSubmitSuccess","name","type","onUpdate","onUpdateSuccess","onDelete","message"],"sources":["C:/Users/jos83/project/expiryalert/src/components/App.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { createFood, updateFood, getFoods, deleteFood } from '../api';\nimport FoodList from './FoodList';\nimport FoodForm from './FoodForm';\nimport LocaleSelect from './LocaleSelect';\nimport useTranslate from '../hooks/useTranslate';\nimport logoImg from '../assets/logo.png';\nimport searchImg from '../assets/ic-search.png';\nimport logoTextImg from '../assets/logo-text.png';\nimport backgroundImg from '../assets/background.png';\nimport './App.css';\n\nfunction AppSortButton({ selected, children, onClick }) {\n  return (\n    <button\n      disabled={selected}\n      className={`AppSortButton ${selected ? 'selected' : ''}`}\n      onClick={onClick}\n    >\n      {children}\n    </button>\n  );\n}\n\nfunction App() {\n  const t = useTranslate();\n  const [order, setOrder] = useState('createdAt');\n  const [cursor, setCursor] = useState(null);\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [loadingError, setLoadingError] = useState(null);\n  const [search, setSearch] = useState('');\n\n  const handleNewestClick = () => setOrder('createdAt');\n\n  const handleCalorieClick = () => setOrder('calorie');\n\n  const handleDelete = async (id) => {\n    const result = await deleteFood(id);\n    if (!result) return;\n\n    const nextItems = items.filter((item) => item.id !== id);\n    setItems(nextItems);\n  };\n\n  const handleLoad = async (options) => {\n    let result;\n    try {\n      setLoadingError(null);\n      setIsLoading(true);\n      result = await getFoods(options);\n    } catch (error) {\n      setLoadingError(error);\n      return;\n    } finally {\n      setIsLoading(false);\n    }\n    const {\n      foods,\n      paging: { nextCursor },\n    } = result;\n    if (!options.cursor) {\n      setItems(foods);\n    } else {\n      setItems((prevItems) => [...prevItems, ...foods]);\n    }\n    setCursor(nextCursor);\n  };\n\n  const handleLoadMore = () => {\n    handleLoad({\n      order,\n      cursor,\n      search,\n    });\n  };\n\n  const handleSearchSubmit = (e) => {\n    e.preventDefault();\n    setSearch(e.target['search'].value);\n  };\n\n  const handleCreateSuccess = (newItem) => {\n    setItems((prevItems) => [newItem, ...prevItems]);\n  };\n\n  const handleUpdateSuccess = (newItem) => {\n    setItems((prevItems) => {\n      const splitIdx = prevItems.findIndex((item) => item.id === newItem.id);\n      return [\n        ...prevItems.slice(0, splitIdx),\n        newItem,\n        ...prevItems.slice(splitIdx + 1),\n      ];\n    });\n  };\n\n  const sortedItems = items.sort((a, b) => b[order] - a[order]);\n\n  useEffect(() => {\n    handleLoad({\n      order,\n      search,\n    });\n  }, [order, search]);\n\n  return (\n    <div className=\"App\" style={{ backgroundImage: `url(\"${backgroundImg}\")` }}>\n      <div className=\"App-nav\">\n        <img src={logoImg} alt=\"Foodit\" />\n      </div>\n      <div className=\"App-container\">\n        <div className=\"App-FoodForm\">\n          <FoodForm\n            onSubmit={createFood}\n            onSubmitSuccess={handleCreateSuccess}\n          />\n        </div>\n        <div className=\"App-filter\">\n          <form className=\"App-search\" onSubmit={handleSearchSubmit}>\n            <input className=\"App-search-input\" name=\"search\" />\n            <button className=\"App-search-button\" type=\"submit\">\n              <img src={searchImg} alt=\"검색\" />\n            </button>\n          </form>\n          <div className=\"App-orders\">\n            <AppSortButton\n              selected={order === 'createdAt'}\n              onClick={handleNewestClick}\n            >\n              {t('newest')}\n            </AppSortButton>\n            <AppSortButton\n              selected={order === 'calorie'}\n              onClick={handleCalorieClick}\n            >\n              {t('sort by calorie')}\n            </AppSortButton>\n          </div>\n        </div>\n        <FoodList\n          className=\"App-FoodList\"\n          items={sortedItems}\n          onUpdate={updateFood}\n          onUpdateSuccess={handleUpdateSuccess}\n          onDelete={handleDelete}\n        />\n        {cursor && (\n          <button\n            className=\"App-load-more-button\"\n            disabled={isLoading}\n            onClick={handleLoadMore}\n          >\n            {t('load more')}\n          </button>\n        )}\n        {loadingError && <p>{loadingError.message}</p>}\n      </div>\n      <div className=\"App-footer\">\n        <div className=\"App-footer-container\">\n          <img src={logoTextImg} alt=\"Foodit\" />\n          <LocaleSelect />\n          <div className=\"App-footer-menu\">\n            {t('terms of service')} | {t('privacy policy')}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}